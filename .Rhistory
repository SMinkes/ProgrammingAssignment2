data <- NA
for(selection[i] in id) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data, na.rm = TRUE)
}
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
for(selection in id) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data, na.rm = TRUE)
}
set.seed(42)
dflist <- vector( "list", 5 )
for( i in 1:5 ){
dflist[[i]] <- data.frame( A = rnorm(100), B = rnorm(100), C = rnorm(100) )
}
varlist <- c("A", "B")
lapply( dflist, function(x){ colMeans(x[varlist]) } )
?colMeans
?colcor
??colcor
?cor
read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
i
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
complete <- function(directory, id = 1:332) {
x = numeric(0)
nobs = numeric(0)
for(i in id) {
nobs <- sum(complete.cases(read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))))
x <- rbind(x, data.frame(i, nobs))
}
x
}
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
id <- 1:3
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
threshold <- 150
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
directpry <- "specdata"
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
directory <- "specdata"
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
read.csv(file.path(directory, paste(sprintf("%03d", id), ".csv", sep="")))
read.csv(file.path(directory, paste(sprintf("%03d", 2), ".csv", sep="")))
avector <- as.vector(aframe['a2'])
class(avector)
avector <- aframe[['a2']]
class(avector)
avector <- aframe[,2]
class(avector)
?as.vector
?aframe
a1 = c(1, 2, 3, 4, 5)
a2 = c(6, 7, 8, 9, 10)
a3 = c(11, 12, 13, 14, 15)
aframe = data.frame(a1, a2, a3)
avector <- as.vector(aframe['a2'])
class(avector)
avector <- aframe[['a2']]
class(avector)
avector <- aframe[,2]
class(avector)
selection <- subset(complete(directory, id), nobs > threshold)
avector <- selection[,1]
avector
avector <- subset(complete(directory, id), nobs > threshold)[,1]
avector
for(i in avector) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
}
data
selection <- subset(complete(directory, id), nobs > threshold)
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data <- NA
for(i in avector) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr <- cor(data, na.rm = TRUE)
}
selection <- subset(complete(directory, id), nobs > threshold)
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data <- NA
for(i in avector) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr <- cor(data)
}
?cor
data
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data <- NA
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data)
}
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data)
}
set.seed(10)
x = as.data.frame(matrix(rnorm(100), ncol = 10))
x$L1 = letters[1:10]
x$L2 = letters[11:20]
cor(x)
set.seed(10)
x = as.data.frame(matrix(rnorm(100), ncol = 10))
x$L1 = letters[1:10]
x$L2 = letters[11:20]
cor(x[sapply(x, is.numeric)])
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data[sapply(data, is.numeric)])
}
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
}
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
}
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- cor(sul, nit)
}
corr
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- cor(sul, nit, na.rm=TRUE)
}
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- cor(sul, nit, use="complete.obs")
}
corr
avector
threshold <- 300
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- cor(sul, nit, use="complete.obs")
}
corr
avector
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- rbind(corr, cor(sul, nit, use="complete.obs"))
}
corr
threshold <-150
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- rbind(corr, cor(sul, nit, use="complete.obs"))
}
corr
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- cbind(corr, cor(sul, nit, use="complete.obs"))
}
corr
corr
complete <- function(directory, id = 1:332) {
x = numeric(0)
nobs = numeric(0)
for(i in id) {
nobs <- sum(complete.cases(read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))))
x <- rbind(x, data.frame(i, nobs))
}
x
}
source("corr.R")
source("complete.R")
cr <- corr("specdata", 150)
head(cr)
corr <- function(directory, threshold = 0) {
avector <- subset(complete(directory, 1:332), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
correlation <- cbind(correlation, cor(sul, nit, use="complete.obs"))
}
correlation
}
cr <- corr("specdata", 150)
head(cr)
corr <- function(directory, threshold = 0) {
avector <- subset(complete(directory, 1:332), nobs > threshold)[,1]
correlation = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
correlation <- cbind(correlation, cor(sul, nit, use="complete.obs"))
}
correlation
}
cr <- corr("specdata", 150)
head(cr)
?head
head(6)
headcr
head(cr)
summary(cr)
cr <- corr("specdata", 400)
head(cr)
GDPurl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv"
GDP <- data.table(read.csv("GDP.csv", skip=4, nrows=215))
setnames(dtGDP, c("X", "X.1", "X.3", "X.4"), c("CountryCode", "rankingGDP", "Long.Name", "gdp"))
Eduurl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv"
Edu <- data.table <-(read.csv(Eduurl))
install.packages("data.table")
library(data.table)
cube <- function(x, n) {
x^3
}
cube(3)
x <- 1:10
if(x > 5) {
x <- 0
}
f <- function(x) {
g <- function(y) {
y + z
}
z <- 4
x + g(x)
}
z <- 10
f(3)
x <- 5
y <- if(x < 3) {
NA
} else {
10
}
y
h <- function(x, y = NULL, d = 3L) {
z <- cbind(x, d)
if(!is.null(y))
z <- z + y
else
z <- z + f
g <- x + y / z
if(d == 3L)
return(g)
g <- g + 10
g
}
search()
?unclass
152/2
x <- list(a = 1:5, b = rnorm(10))
lapply(x, mean)
lapply(x, mean)
x <- 1:4
lapply(x, runif)
lapply(x, runif, min = 0, max = 10)
x <- list(a = matrix(1:4, 2, 2), b = matrix(1:6, 2, 3))
lapply(x, function(elt) elt[,1])
x <- list(a = matrix(1:4, 2, 2), b = matrix(1:6, 3, 2))
lapply(x, function(elt) elt[,1])
x <- matrix(rnorm(200), 20, 10)
apply(x, 2, mean)
apply(x, 1, sum)
x
apply(x, 1, quantile, probs = c(0.25, 0.75))
str(mapply)
y <- list(rep(1,4), rep(2,3), rep(3,2), rep(4,1))
mapply(y)
mapply(rep, 1:4, 4:1)
y
?invisible
mean(x)
traceback()
lm(y ~ x)
tracebac()
traceback()
lm(y ~ x)
traceback()
debug(lm)
lm(y~x)
makeVector <- function(x = numeric()) {
m <- NULL
set <- function(y) {
x <<- y
m <<- NULL
}
get <- function() x
setmean <- function(mean) m <<- mean
getmean <- function() m
list(set = set, get = get,
setmean = setmean,
getmean = getmean)
}
list.path()
ls()
ls
getwd()
setwd("D:/R/Lesson2")
set("ProgrammingAssignment2")
setwd("ProgrammingAssignment2")
ls
ls()
list.files
list.files()
cachematrix.R
"cachematrix.R"
?solve
makeVector <- function(x = numeric()) {
m <- NULL
print(environment())
evn <- environment()
print(parent.env(evn))
set <- function(y) {
x <<- y
m <<- NULL
}
get <- function() x
setmean <- function(mean) m <<- mean
getmean <- function() m
getevn<- function() environment()
list(set = set, get = get,
setmean = setmean,
getmean = getmean,
getevn = getevn)
}
makevector(1)
makeVector(1)
makeVector(2)
makeVector(3)
cachemean <- function(x, ...) {
m <- x$getmean()
if(!is.null(m)) {
message("getting cached data")
return(m)
}
data <- x$get()
m <- mean(data, ...)
x$setmean(m)
m
}
cachemean
cachemean(3)
makeVector <- function(x = numeric()) {
m <- NULL
print(environment())
evn <- environment()
print(parent.env(evn))
set <- function(y) {
x <<- y
m <<- NULL
}
get <- function() x
setmean <- function(mean) m <<- mean
getmean <- function() m
getevn<- function() environment()
list(set = set, get = get,
setmean = setmean,
getmean = getmean,
getevn = getevn)
}
makeVector(3)
x <- 1:10000
vec <- makeVector(x)
vec$getmean()
mx <- mean(x)
vec$setmean(mx)
vec$getmean()
vec$getevn()
ls(vec$getevn())
parent.env(vec$getevn())
ls(parent.env(vec$getevn()))
parent.env(vec$getevn())$m
x <- 1:4
x1 <- makeVector(x)
?matrix
set <- function(y) {
x <<- y
m <<- NULL
}
makeVector <- function(x = numeric()) {
m <- NULL
set <- function(y) {
x <<- y
m <<- NULL
}
get <- function() x
setmean <- function(mean) m <<- mean
getmean <- function() m
list(set = set, get = get,
setmean = setmean,
getmean = getmean)
}
m <- NULL
set <- function(y) {
x <<- y
m <<- NULL
}
get <- function() x
setmean <- function(mean) m <<- mean
getmean <- function() m
list(set = set, get = get,
setmean = setmean,
getmean = getmean)
makeVector
makeVector()
vec <- makeVector()
vec
vec <- makeVector(2)
vec
?kist
?list
makeCacheMatrix <- function(x = matrix()) {
m <- NULL
set <- function(y) {
x <<- y
m <<- NULL
}
get <- function() x
setmatrix <- function(solve) m <<- solve
getmatrix <- function() m
list(set = set, get = get,
setmatrix = setmatrix,
getmatrix = getmatrix)
}
cacheSolve <- function(x, ...) {
## Return a matrix that is the inverse of 'x'
m <- x$getmatrix()
if(!is.null(m)) {
message("getting cached data")
return(m)
}
data <- x$get()
m <- solve(data, ...)
x$setmatrix(m)
m
}
a <- makeCacheMatrix()
a$set(matrix(1:4,2,2))
CacheSolve(a)
cacheSolve(a)
cacheSolve(a)
